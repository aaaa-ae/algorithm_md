# 📝 tmux 使用笔记

## 1. tmux 是什么？

- **tmux = 终端复用工具**
- 能在远程服务器上开“虚拟终端”，即使你断开 SSH、本地电脑关机，里面的程序依然运行。
- 常用于：
  - 下载大模型（好几个小时）
  - 训练深度学习模型（几天甚至几周）
  - 长时间运行的脚本/服务

------

## 2. 常用操作

### 新建会话

```bash
tmux new -s 会话名
```

例：`tmux new -s dl`
 👉 进入一个叫 `dl` 的会话。

------

### 分离（后台运行，不中断任务）

在 tmux 界面里：

- 按下 `Ctrl+B`
- 松开后，再按 `D`
   👉 提示 `[detached]`，会话转到后台。

------

### 恢复会话

```bash
tmux attach -t 会话名
```

例：`tmux attach -t dl`
 👉 回到后台会话，看到之前的进程。

------

### 查看所有会话

```bash
tmux ls
```

👉 列出当前所有会话。

------

### 关闭会话

在 tmux 会话里：

```bash
exit
```

或直接 `Ctrl+D`
 👉 会话和里面的进程都会结束。

------

### 杀掉会话（不进入）

```bash
tmux kill-session -t 会话名
```

------

## 3. 小技巧

- 界面乱了 → `Ctrl+B` → `L`（刷新屏幕）
- 忘了会话名 → `tmux ls` 查看
- 建议给会话起有意义的名字，比如 `dl`（下载）、`train`（训练）

------

## 4. 常用工作流（最简流程）

1. **新建并进入会话**

   ```bash
   tmux new -s dl
   ```

2. **运行下载或训练脚本**

   ```bash
   git lfs fetch --all
   # 或 python run_rag_dummy.py
   ```

3. **分离后台**
    `Ctrl+B` → `D`

4. **断开 SSH 或关电脑**（任务继续跑）

5. **回来时恢复**

   ```bash
   tmux attach -t dl
   ```

------

✅ 总结：tmux 就是“远程服务器的后台屏幕”，让你放心跑长时间任务而不怕断线。
 核心记住三步：

- `tmux new -s 名字`（新建）
- `Ctrl+B D`（分离）
- `tmux attach -t 名字`（恢复）